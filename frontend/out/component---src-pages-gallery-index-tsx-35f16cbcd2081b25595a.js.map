{"version":3,"file":"component---src-pages-gallery-index-tsx-35f16cbcd2081b25595a.js","mappings":"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","sources":["webpack://ag2studio/./src/components/views/gallery/gallery.tsx","webpack://ag2studio/./src/pages/gallery/index.tsx","webpack://ag2studio/./node_modules/@heroicons/react/24/outline/esm/ChevronLeftIcon.js"],"sourcesContent":["import * as React from \"react\";\r\nimport { appContext } from \"../../../hooks/provider\";\r\nimport { fetchJSON, getServerUrl, timeAgo, truncateText } from \"../../utils\";\r\nimport { IGalleryItem, IStatus } from \"../../types\";\r\nimport { Button, message } from \"antd\";\r\nimport { BounceLoader, Card } from \"../../atoms\";\r\nimport {\r\n  ChevronLeftIcon,\r\n  InformationCircleIcon,\r\n} from \"@heroicons/react/24/outline\";\r\nimport { navigate } from \"gatsby\";\r\nimport ChatBox from \"../playground/chatbox\";\r\n\r\nconst GalleryView = ({ location }: any) => {\r\n  const serverUrl = getServerUrl();\r\n  const { user } = React.useContext(appContext);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [gallery, setGallery] = React.useState<null | IGalleryItem[]>(null);\r\n  const [currentGallery, setCurrentGallery] =\r\n    React.useState<null | IGalleryItem>(null);\r\n  const listGalleryUrl = `${serverUrl}/gallery?user_id=${user?.email}`;\r\n  const [error, setError] = React.useState<IStatus | null>({\r\n    status: true,\r\n    message: \"All good\",\r\n  });\r\n  const [currentGalleryId, setCurrentGalleryId] = React.useState<string | null>(\r\n    null\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    // get gallery id from url\r\n    const urlParams = new URLSearchParams(location.search);\r\n    const galleryId = urlParams.get(\"id\");\r\n\r\n    if (galleryId) {\r\n      // Fetch gallery details using the galleryId\r\n      fetchGallery(galleryId);\r\n      setCurrentGalleryId(galleryId);\r\n    } else {\r\n      // Redirect to an error page or home page if the id is not found\r\n      // navigate(\"/\");\r\n      fetchGallery(null);\r\n    }\r\n  }, []);\r\n\r\n  const fetchGallery = (galleryId: string | null) => {\r\n    const fetchGalleryUrl = galleryId\r\n      ? `${serverUrl}/gallery?gallery_id=${galleryId}`\r\n      : listGalleryUrl;\r\n    setError(null);\r\n    setLoading(true);\r\n    // const fetch;\r\n    const payLoad = {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n\r\n    const onSuccess = (data: any) => {\r\n      if (data && data.status) {\r\n        // message.success(data.message);\r\n        console.log(\"gallery\", data);\r\n        if (galleryId) {\r\n          // Set the currently viewed gallery item\r\n          setCurrentGallery(data.data[0]);\r\n        } else {\r\n          setGallery(data.data);\r\n        }\r\n        // Set the list of gallery items\r\n      } else {\r\n        message.error(data.message);\r\n      }\r\n      setLoading(false);\r\n    };\r\n    const onError = (err: any) => {\r\n      setError(err);\r\n      message.error(err.message);\r\n      setLoading(false);\r\n    };\r\n    fetchJSON(fetchGalleryUrl, payLoad, onSuccess, onError);\r\n  };\r\n\r\n  const GalleryContent = ({ item }: { item: IGalleryItem }) => {\r\n    return (\r\n      <div>\r\n        <div className=\"mb-4 text-sm\">\r\n          This session contains {item.messages.length} messages and was created{\" \"}\r\n          {timeAgo(item.timestamp)}\r\n        </div>\r\n        <div className=\"\">\r\n          <ChatBox initMessages={item.messages} editable={false} />\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const TagsView = ({ tags }: { tags: string[] }) => {\r\n    const tagsView = tags.map((tag: string, index: number) => {\r\n      return (\r\n        <div key={\"tag\" + index} className=\"mr-2 inline-block\">\r\n          <span className=\"text-xs bg-secondary border px-3 p-1 rounded\">\r\n            {tag}\r\n          </span>\r\n        </div>\r\n      );\r\n    });\r\n    return <div className=\"flex flex-wrap\">{tagsView}</div>;\r\n  };\r\n\r\n  const galleryRows = gallery?.map((item: IGalleryItem, index: number) => {\r\n    const isSelected = currentGallery?.id === item.id;\r\n    return (\r\n      <div key={\"galleryrow\" + index} className=\"\">\r\n        <Card\r\n          active={isSelected}\r\n          onClick={() => {\r\n            setCurrentGallery(item);\r\n            // add to history\r\n            navigate(`/gallery?id=${item.id}`);\r\n          }}\r\n          className=\"h-full p-2 cursor-pointer\"\r\n          title={truncateText(item.messages[0]?.content || \"\", 20)}\r\n        >\r\n          <div className=\"my-2\">\r\n            {\" \"}\r\n            {truncateText(item.messages[0]?.content || \"\", 80)}\r\n          </div>\r\n          <div className=\"text-xs\">\r\n            {\" \"}\r\n            {item.messages.length} message{item.messages.length > 1 && \"s\"}\r\n          </div>\r\n          <div className=\"my-2 border-t border-dashed w-full pt-2 inline-flex gap-2 \">\r\n            <TagsView tags={item.tags} />{\" \"}\r\n          </div>\r\n          <div className=\"text-xs\">{timeAgo(item.timestamp)}</div>\r\n        </Card>\r\n      </div>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div className=\" \">\r\n      <div className=\"mb-4 text-2xl\">Gallery</div>\r\n\r\n      {/* back to gallery button */}\r\n\r\n      {currentGallery && (\r\n        <div className=\"mb-4   w-full\">\r\n          <Button\r\n            type=\"primary\"\r\n            onClick={() => {\r\n              setCurrentGallery(null);\r\n              // add to history\r\n              navigate(`/gallery?_=${Date.now()}`);\r\n              if (currentGalleryId) {\r\n                fetchGallery(null);\r\n                setCurrentGalleryId(null);\r\n              }\r\n            }}\r\n            className=\"bg-primary text-white px-2 py-1 rounded\"\r\n          >\r\n            <ChevronLeftIcon className=\"h-4 w-4 inline mr-1\" />\r\n            Back to gallery\r\n          </Button>\r\n        </div>\r\n      )}\r\n\r\n      {!currentGallery && (\r\n        <>\r\n          <div>\r\n            View a collection of AG2 agent specifications and sessions{\" \"}\r\n          </div>\r\n          <div className=\"mt-4 grid gap-3 grid-cols-2 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6\">\r\n            {galleryRows}\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {gallery && gallery.length === 0 && (\r\n        <div className=\"text-sm border rounded text-secondary p-2\">\r\n          <InformationCircleIcon className=\"h-4 w-4 inline mr-1\" />\r\n          No gallery items found. Please create a chat session and publish to\r\n          gallery.\r\n        </div>\r\n      )}\r\n\r\n      {currentGallery && (\r\n        <div className=\"mt-4 border-t pt-2\">\r\n          <GalleryContent item={currentGallery} />\r\n        </div>\r\n      )}\r\n\r\n      {loading && (\r\n        <div className=\"w-full text-center boder mt-4\">\r\n          <div>\r\n            {\" \"}\r\n            <BounceLoader />\r\n          </div>\r\n          loading gallery\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GalleryView;\r\n","import * as React from \"react\";\r\nimport { graphql } from \"gatsby\";\r\nimport Layout from \"../../components/layout\";\r\nimport GalleryView from \"../../components/views/gallery/gallery\";\r\n\r\n// markup\r\nconst GalleryPage = ({ location, data }: any) => {\r\n  return (\r\n    <Layout meta={data.site.siteMetadata} title=\"Gallery\" link={\"/gallery\"}>\r\n      <main style={{ height: \"100%\" }} className=\" h-full \">\r\n        <GalleryView location={location} />\r\n      </main>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport const query = graphql`\r\n  query HomePageQuery {\r\n    site {\r\n      siteMetadata {\r\n        description\r\n        title\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport default GalleryPage;\r\n","import * as React from \"react\";\nfunction ChevronLeftIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 19.5 8.25 12l7.5-7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChevronLeftIcon);\nexport default ForwardRef;"],"names":["_ref","location","serverUrl","getServerUrl","user","React","appContext","loading","setLoading","gallery","setGallery","currentGallery","setCurrentGallery","listGalleryUrl","email","error","setError","status","message","currentGalleryId","setCurrentGalleryId","galleryId","URLSearchParams","search","get","fetchGallery","fetchGalleryUrl","fetchJSON","method","headers","data","console","log","err","GalleryContent","_ref2","item","className","messages","length","timeAgo","timestamp","ChatBox","initMessages","editable","TagsView","_ref3","tags","tagsView","map","tag","index","key","galleryRows","_item$messages$","_item$messages$2","isSelected","id","Card","active","onClick","navigate","title","truncateText","content","Button","type","Date","now","ChevronLeftIcon","InformationCircleIcon","BounceLoader","Layout","meta","site","siteMetadata","link","style","height","GalleryView","titleId","props","svgRef","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","strokeLinecap","strokeLinejoin","d","ForwardRef"],"sourceRoot":""}