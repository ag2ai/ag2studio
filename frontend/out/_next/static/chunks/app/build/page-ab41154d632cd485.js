(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1],{57148:(e,s,l)=>{Promise.resolve().then(l.bind(l,61069))},61069:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>eo});var t=l(95155),a=l(12115),n=l(59335),i=l(68144),o=l(21096),r=l(51270),c=l(49904),d=l(72568),m=l(99373),u=l(24681),h=l(68047),x=l(84843),p=l(7663),g=l(71548),j=l(94860),v=l(66799);let y=e=>{let{}=e,[s,l]=a.useState(!1),[y,f]=a.useState({status:!0,message:"All good"}),{user:N}=a.useContext(g.v),k=(0,j.Tt)(),A="".concat(k,"/skills?user_id=").concat(null==N?void 0:N.email),b="".concat(k,"/skills"),[w,S]=a.useState([]),[C,_]=a.useState(null),[T,E]=a.useState(!1),[F,M]=a.useState(!1),I=(0,j.mj)(),[O,P]=a.useState(I),R=e=>{f(null),l(!0);let s="".concat(k,"/skills/delete?user_id=").concat(null==N?void 0:N.email,"&skill_id=").concat(e.id),t={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:null==N?void 0:N.email,skill:e})};(0,j.hI)(s,t,e=>{e&&e.status?(m.Ay.success(e.message),D()):m.Ay.error(e.message),l(!1)},e=>{f(e),m.Ay.error(e.message),l(!1)})},D=()=>{f(null),l(!0),(0,j.hI)(A,{method:"GET",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?(console.log("skills",e.data),S(e.data)):m.Ay.error(e.message),l(!1)},e=>{f(e),m.Ay.error(e.message),l(!1)})},J=e=>{f(null),l(!0),e.user_id=null==N?void 0:N.email;let s={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)};(0,j.hI)(b,s,e=>{e&&e.status?(m.Ay.success(e.message),S([e.data].concat(w||[]))):m.Ay.error(e.message),l(!1)},e=>{f(e),m.Ay.error(e.message),l(!1)})};a.useEffect(()=>{N&&D()},[]);let L=(w||[]).map((e,s)=>{let l=[{title:"Download",icon:n.A,onClick:s=>{s.stopPropagation();let l=document.createElement("a"),t=new Blob([JSON.stringify((0,j.E5)(e))],{type:"application/json"});l.href=URL.createObjectURL(t),l.download="skill_".concat(e.name,".json"),document.body.appendChild(l),l.click()},hoverText:"Download"},{title:"Make a Copy",icon:i.A,onClick:s=>{s.stopPropagation();let l={...e};l.name="".concat(e.name," Copy"),l.user_id=null==N?void 0:N.email,l.id&&delete l.id,P(l),M(!0)},hoverText:"Make a Copy"},{title:"Delete",icon:o.A,onClick:s=>{s.stopPropagation(),R(e)},hoverText:"Delete"}];return(0,t.jsx)("li",{className:" ",style:{width:"200px"},children:(0,t.jsxs)("div",{children:[" ",(0,t.jsxs)(v.Zp,{className:"h-full p-2 cursor-pointer group",title:(0,j.EJ)(e.name,25),onClick:()=>{_(e),E(!0)},children:[(0,t.jsxs)("div",{style:{minHeight:"65px"},className:"my-2   break-words","aria-hidden":"true",children:[" ",e.description?(0,j.EJ)(e.description||"",70):(0,j.EJ)(e.content||"",70)]}),(0,t.jsx)("div",{"aria-label":"Updated ".concat((0,j.fF)(e.updated_at||"")),className:"text-xs",children:(0,j.fF)(e.updated_at||"")}),(0,t.jsx)(v.O8,{items:l})]}),(0,t.jsx)("div",{className:"text-right mt-2"})]})},"skillrow"+s)}),G=e=>{let{skill:l,setSkill:n,showSkillModal:i,setShowSkillModal:o,handler:r}=e,c=a.useRef(null),[d,m]=a.useState(l);return(0,t.jsx)(u.A,{title:(0,t.jsxs)(t.Fragment,{children:["Skill Specification"," ",(0,t.jsx)("span",{className:"text-accent font-normal",children:null==d?void 0:d.name})," "]}),width:800,open:i,onCancel:()=>{o(!1)},footer:[(0,t.jsx)(h.Ay,{onClick:()=>{o(!1)},children:"Cancel"},"back"),(0,t.jsx)(h.Ay,{type:"primary",loading:s,onClick:()=>{if(o(!1),c.current){let e=c.current.getValue(),s={...d,content:e};n(s),r(s)}},children:"Save"},"submit")],children:d&&(0,t.jsxs)("div",{style:{minHeight:"70vh"},children:[(0,t.jsx)("div",{className:"mb-2",children:(0,t.jsx)(x.A,{placeholder:"Skill Name",value:d.name,onChange:e=>{m({...d,name:e.target.value})}})}),(0,t.jsx)("div",{style:{height:"70vh"},className:"h-full  mt-2 rounded",children:(0,t.jsx)(v.TY,{value:null==d?void 0:d.content,language:"python",editorRef:c})})]})})},U=()=>{let e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>{let s=e.target.files[0],l=new FileReader;l.onload=e=>{var s;let l=null===(s=e.target)||void 0===s?void 0:s.result;if(l)try{let e=JSON.parse(l);e&&(P(e),M(!0))}catch(e){m.Ay.error("Invalid skill file")}},l.readAsText(s)},e.click()},B=[{key:"uploadskill",label:(0,t.jsxs)("div",{children:[(0,t.jsx)(r.A,{className:"w-5 h-5 inline-block mr-2"}),"Upload Skill"]})}];return(0,t.jsxs)("div",{className:" text-primary ",children:[(0,t.jsx)(G,{skill:C,setSkill:_,showSkillModal:T,setShowSkillModal:E,handler:e=>{J(e)}}),(0,t.jsx)(G,{skill:O,setSkill:P,showSkillModal:F,setShowSkillModal:M,handler:e=>{J(e)}}),(0,t.jsx)("div",{className:"mb-2   relative",children:(0,t.jsxs)("div",{className:"",children:[(0,t.jsxs)("div",{className:"flex mt-2 pb-2 mb-2 border-b",children:[(0,t.jsxs)("ul",{className:"flex-1   font-semibold mb-2 ",children:[" ","Skills (",L.length,")"," "]}),(0,t.jsx)("div",{children:(0,t.jsxs)(p.A.Button,{type:"primary",menu:{items:B,onClick:e=>{let{key:s}=e;if("uploadskill"===s){U();return}}},placement:"bottomRight",trigger:["click"],onClick:()=>{M(!0)},children:[(0,t.jsx)(c.A,{className:"w-5 h-5 inline-block mr-1"}),"New Skill"]})})]}),(0,t.jsxs)("div",{className:"text-xs mb-2 pb-1  ",children:[" ","Skills are python functions that agents can use to solve tasks."," "]}),w&&w.length>0&&(0,t.jsxs)("div",{className:"w-full  relative",children:[(0,t.jsx)(v.p8,{loading:s}),(0,t.jsx)("div",{className:"   flex flex-wrap gap-3",children:L})]}),w&&0===w.length&&!s&&(0,t.jsxs)("div",{className:"text-sm border mt-4 rounded text-secondary p-2",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 inline mr-1"}),"No skills found. Please create a new skill."]}),s&&(0,t.jsxs)("div",{className:"  w-full text-center",children:[" ",(0,t.jsx)(v.g0,{})," ",(0,t.jsx)("span",{className:"inline-block",children:" loading .. "})]})]})})]})};var f=l(82957),N=l(80156),k=l(89797),A=l(70565),b=l(57483),w=l(30979),S=l(500),C=l(37118),_=l(9365),T=l(68773),E=l(9796),F=l(60915),M=l(36743),I=l(93463),O=l(44850),P=l(67884);let{useToken:R}=f.A,D=e=>{let{agentId:s}=e,[l,n]=(0,a.useState)(null),[i,o]=(0,a.useState)(!1),[r,u]=(0,a.useState)([]),[h,x]=(0,a.useState)([]),v=(0,j.Tt)(),{user:y}=a.useContext(g.v),f="".concat(v,"/skills?user_id=").concat(null==y?void 0:y.email),N="".concat(v,"/agents/link/skill/").concat(s),k=()=>{n(null),o(!0),(0,j.hI)(f,{method:"GET",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?u(e.data):m.Ay.error(e.message),o(!1)},e=>{n(e),m.Ay.error(e.message),o(!1)})},A=()=>{n(null),o(!0),(0,j.hI)(N,{method:"GET",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?x(e.data):m.Ay.error(e.message),o(!1)},e=>{n(e),m.Ay.error(e.message),o(!1)})},b=(e,s)=>{n(null),o(!0);let l="".concat(v,"/agents/link/skill/").concat(e,"/").concat(s);(0,j.hI)(l,{method:"POST",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?(m.Ay.success(e.message),A()):m.Ay.error(e.message),o(!1)},e=>{n(e),m.Ay.error(e.message),o(!1)})},w=(e,s)=>{n(null),o(!0);let l="".concat(v,"/agents/link/skill/").concat(e,"/").concat(s);(0,j.hI)(l,{method:"DELETE",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?(m.Ay.success(e.message),A()):m.Ay.error(e.message),o(!1)},e=>{n(e),m.Ay.error(e.message),o(!1)})};(0,a.useEffect)(()=>{k(),A()},[s]);let S=r.map((e,s)=>({key:s,label:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:e.name}),(0,t.jsx)("div",{className:"text-xs text-accent",children:(0,j.EJ)(e.description||"",20)})]}),value:s})),C=e=>{let{key:l}=e,t=r[parseInt(l.toString())];t&&t.id&&b(s,t.id)},{token:I}=R(),O={backgroundColor:I.colorBgElevated,borderRadius:I.borderRadiusLG,boxShadow:I.boxShadowSecondary},P=e=>{let l=h[e];l&&l.id&&w(s,l.id)},D=h.map((e,s)=>{let l=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:e.name}),(0,t.jsx)("div",{className:"text-xs text-accent",children:(0,j.EJ)(e.description||"",90)})]});return(0,t.jsx)("div",{className:"mr-1 mb-1 p-1 px-2 rounded border",children:(0,t.jsxs)("div",{className:"inline-flex",children:[" ",(0,t.jsxs)(E.A,{title:l,children:[(0,t.jsx)("div",{children:e.name})," "]}),(0,t.jsx)("div",{role:"button",onClick:e=>{e.stopPropagation(),P(s)},className:"ml-1 text-primary hover:text-accent duration-300",children:(0,t.jsx)(M.A,{className:"w-4 h-4 inline-block"})})]})},"skillrow_"+s)});return(0,t.jsxs)("div",{children:[h&&h.length>0&&(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("span",{className:"text-accent",children:h.length})," Skills linked to this agent"]}),(!h||0===h.length)&&(0,t.jsxs)("div",{className:"text-sm border rounded text-secondary p-2 my-2",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 inline mr-1"})," No skills currently linked to this agent. Please add a skill using the button below."]}),(0,t.jsxs)("div",{className:"flex flex-wrap",children:[D,(0,t.jsx)(()=>(0,t.jsx)(p.A,{menu:{items:S,onClick:C},placement:"bottomRight",trigger:["click"],dropdownRender:e=>(0,t.jsxs)("div",{style:O,children:[a.cloneElement(e,{style:{boxShadow:"none"}}),0===r.length&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.A,{style:{margin:0}}),(0,t.jsx)(T.A,{style:{padding:8}}),(0,t.jsxs)("div",{className:"p-3",children:[" ",(0,t.jsxs)("span",{className:"text-xs",children:[(0,t.jsx)(F.A,{className:"w-4 h-4 inline-block mr-1"})," ","Please create skills in the Skills tab"]})]})]})]}),children:(0,t.jsxs)("div",{className:"inline-flex mr-1 mb-1 p-1 px-2 rounded border hover:border-accent duration-300 hover:text-accent",role:"button",children:["add ",(0,t.jsx)(c.A,{className:"w-4 h-4 inline-block mt-1"})]})}),{})]})]})},J=e=>{let{agent:s,setAgent:l}=e,n="h-6 w-6 inline-block ",i=[{label:"User Proxy Agent",value:"userproxy",description:(0,t.jsx)(t.Fragment,{children:"Typically represents the user and executes code. "}),icon:(0,t.jsx)(I.A,{className:n})},{label:"Assistant Agent",value:"assistant",description:(0,t.jsx)(t.Fragment,{children:"Plan and generate code to solve user tasks"}),icon:(0,t.jsx)(O.A,{className:n})},{label:"GroupChat ",value:"groupchat",description:(0,t.jsx)(t.Fragment,{children:"Manage group chat interactions"}),icon:(0,t.jsx)(P.A,{className:n})}],[o,r]=a.useState(null),c=i.map((e,a)=>(0,t.jsx)("li",{role:"listitem",className:"w-36",children:(0,t.jsx)(v.Zp,{active:o===e.value,className:"h-full p-2 cursor-pointer",title:(0,t.jsx)("div",{className:"  ",children:e.label}),onClick:()=>{r(e.value),s&&l((0,j.K3)(e.value))},children:(0,t.jsxs)("div",{style:{minHeight:"35px"},className:"my-2   break-words ",children:[" ",(0,t.jsx)("div",{className:"mb-2",children:e.icon}),(0,t.jsxs)("span",{className:"text-secondary  tex-sm",children:[" ",e.description]})]})})},"agenttyperow"+a));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pb-3",children:"Select Agent Type"}),(0,t.jsx)("ul",{className:"inline-flex gap-2",children:c})]})},L=e=>{let{workflow:s,setWorkflow:l}=e,n=[{label:"Default",value:"default",description:(0,t.jsx)(t.Fragment,{children:" Includes a sender and receiver. "}),icon:(0,t.jsx)(I.A,{className:"h-6 w-6 inline-block "})}],[i,o]=a.useState(null),r=n.map((e,a)=>(0,t.jsx)("li",{role:"listitem",className:"w-36",children:(0,t.jsx)(v.Zp,{active:i===e.value,className:"h-full p-2 cursor-pointer",title:(0,t.jsx)("div",{className:"  ",children:e.label}),onClick:()=>{o(e.value),s&&l((0,j.Yj)())},children:(0,t.jsxs)("div",{style:{minHeight:"35px"},className:"my-2   break-words",children:[" ",(0,t.jsx)("div",{className:"mb-2",children:e.icon}),(0,t.jsxs)("span",{className:"text-secondary  tex-sm",children:[" ",e.description]})]})})},"workflowtype"+a));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pb-3",children:"Select Workflow Type"}),(0,t.jsx)("ul",{className:"inline-flex gap-2",children:r})]})},G=e=>{let{agentId:s}=e,[l,n]=(0,a.useState)(null),[i,o]=(0,a.useState)(!1),[r,u]=(0,a.useState)([]),[h,x]=(0,a.useState)([]),v=(0,j.Tt)(),{user:y}=a.useContext(g.v),f="".concat(v,"/agents?user_id=").concat(null==y?void 0:y.email),N="".concat(v,"/agents/link/agent/").concat(s),k=()=>{n(null),o(!0),(0,j.hI)(f,{method:"GET",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?u(e.data):m.Ay.error(e.message),o(!1)},e=>{n(e),m.Ay.error(e.message),o(!1)})},A=()=>{n(null),o(!0),(0,j.hI)(N,{method:"GET",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?x(e.data):m.Ay.error(e.message),o(!1)},e=>{n(e),m.Ay.error(e.message),o(!1)})},b=(e,s)=>{n(null),o(!0);let l="".concat(v,"/agents/link/agent/").concat(e,"/").concat(s);(0,j.hI)(l,{method:"POST",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?(m.Ay.success(e.message),A()):m.Ay.error(e.message),o(!1)},e=>{n(e),m.Ay.error(e.message),o(!1)})},w=(e,s)=>{n(null),o(!0);let l="".concat(v,"/agents/link/agent/").concat(e,"/").concat(s);(0,j.hI)(l,{method:"DELETE",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?(m.Ay.success(e.message),A()):m.Ay.error(e.message),o(!1)},e=>{n(e),m.Ay.error(e.message),o(!1)})};(0,a.useEffect)(()=>{k(),A()},[]);let S=r.length>0?r.map((e,s)=>({key:s,label:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:e.config.name}),(0,t.jsx)("div",{className:"text-xs text-accent",children:(0,j.EJ)(e.config.description||"",20)})]}),value:s})):[{key:-1,label:(0,t.jsx)(t.Fragment,{children:"No agents found"}),value:0}],C=e=>{let{key:l}=e,t=r[parseInt(l.toString())];t&&t.id&&b(s,t.id)},I=e=>{let l=h[e];l&&l.id&&w(s,l.id)},{token:O}=R(),P={backgroundColor:O.colorBgElevated,borderRadius:O.borderRadiusLG,boxShadow:O.boxShadowSecondary},D=h.map((e,s)=>{let l=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:e.config.name}),(0,t.jsx)("div",{className:"text-xs text-accent",children:(0,j.EJ)(e.config.description||"",90)})]});return(0,t.jsx)("div",{className:"mr-1 mb-1 p-1 px-2 rounded border",children:(0,t.jsxs)("div",{className:"inline-flex",children:[" ",(0,t.jsxs)(E.A,{title:l,children:[(0,t.jsx)("div",{children:e.config.name})," "]}),(0,t.jsx)("div",{role:"button",onClick:e=>{e.stopPropagation(),I(s)},className:"ml-1 text-primary hover:text-accent duration-300",children:(0,t.jsx)(M.A,{className:"w-4 h-4 inline-block"})})]})},"agentrow_"+s)});return(0,t.jsxs)("div",{children:[h&&h.length>0&&(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("span",{className:"text-accent",children:h.length})," Agents linked to this agent"]}),(!h||0===h.length)&&(0,t.jsxs)("div",{className:"text-sm border rounded text-secondary p-2 my-2",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 inline mr-1"})," No agents currently linked to this agent. Please add an agent using the button below."]}),(0,t.jsxs)("div",{className:"flex flex-wrap",children:[D,(0,t.jsx)(()=>(0,t.jsx)(p.A,{menu:{items:S,onClick:C},placement:"bottomRight",trigger:["click"],dropdownRender:e=>(0,t.jsxs)("div",{style:P,children:[a.cloneElement(e,{style:{boxShadow:"none"}}),0===r.length&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.A,{style:{margin:0}}),(0,t.jsx)(T.A,{style:{padding:8}}),(0,t.jsxs)("div",{className:"p-3",children:[" ",(0,t.jsxs)("span",{className:"text-xs",children:[(0,t.jsx)(F.A,{className:"w-4 h-4 inline-block mr-1"})," ","Please create agents in the Agents tab"]})]})]})]}),children:(0,t.jsxs)("div",{className:"inline-flex mr-1 mb-1 p-1 px-2 rounded border hover:border-accent duration-300 hover:text-accent",role:"button",children:["add ",(0,t.jsx)(c.A,{className:"w-4 h-4 inline-block mt-1"})]})}),{})]})]})},U=e=>{let{agentId:s}=e,[l,n]=(0,a.useState)(null),[i,o]=(0,a.useState)(!1),[r,u]=(0,a.useState)([]),[h,x]=(0,a.useState)([]),v=(0,j.Tt)(),{user:y}=a.useContext(g.v),f="".concat(v,"/models?user_id=").concat(null==y?void 0:y.email),N="".concat(v,"/agents/link/model/").concat(s),k=()=>{n(null),o(!0),(0,j.hI)(f,{method:"GET",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?u(e.data):m.Ay.error(e.message),o(!1)},e=>{n(e),m.Ay.error(e.message),o(!1)})},A=()=>{n(null),o(!0),(0,j.hI)(N,{method:"GET",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?x(e.data):m.Ay.error(e.message),o(!1)},e=>{n(e),m.Ay.error(e.message),o(!1)})},b=(e,s)=>{n(null),o(!0);let l="".concat(v,"/agents/link/model/").concat(e,"/").concat(s);(0,j.hI)(l,{method:"POST",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?(m.Ay.success(e.message),console.log("linked model",e),A()):m.Ay.error(e.message),o(!1)},e=>{n(e),m.Ay.error(e.message),o(!1)})},w=(e,s)=>{n(null),o(!0);let l="".concat(v,"/agents/link/model/").concat(e,"/").concat(s);(0,j.hI)(l,{method:"DELETE",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?(m.Ay.success(e.message),console.log("unlinked model",e),A()):m.Ay.error(e.message),o(!1)},e=>{n(e),m.Ay.error(e.message),o(!1)})};(0,a.useEffect)(()=>{k(),A()},[]);let S=r.length>0?r.map((e,s)=>({key:s,label:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:e.model}),(0,t.jsx)("div",{className:"text-xs text-accent",children:(0,j.EJ)(e.description||"",20)})]}),value:s})):[{key:-1,label:(0,t.jsx)(t.Fragment,{children:"No models found"}),value:0}],C=e=>{let{key:l}=e,t=r[parseInt(l.toString())];console.log("selected model",t),t&&t.id&&b(s,t.id)},I={boxShadow:"none"},{token:O}=R(),P={backgroundColor:O.colorBgElevated,borderRadius:O.borderRadiusLG,boxShadow:O.boxShadowSecondary},D=e=>{let l=h[e];l&&l.id&&w(s,l.id)},J=h.map((e,s)=>{let l=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:e.model}),e.base_url&&(0,t.jsx)("div",{children:e.base_url}),e.api_key&&(0,t.jsx)("div",{children:(0,j.JS)(e.api_key,3)}),(0,t.jsx)("div",{className:"text-xs text-accent",children:(0,j.EJ)(e.description||"",90)})]});return(0,t.jsx)("div",{className:"mr-1 mb-1 p-1 px-2 rounded border",children:(0,t.jsxs)("div",{className:"inline-flex",children:[" ",(0,t.jsxs)(E.A,{title:l,children:[(0,t.jsx)("div",{children:e.model})," "]}),(0,t.jsx)("div",{role:"button",onClick:e=>{e.stopPropagation(),D(s)},className:"ml-1 text-primary hover:text-accent duration-300",children:(0,t.jsx)(M.A,{className:"w-4 h-4 inline-block"})})]})},"modelrow_"+s)});return(0,t.jsxs)("div",{className:"",children:[h&&h.length>0&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"mb-2",children:[" ",(0,t.jsx)("span",{className:"text-accent",children:h.length})," Models linked to this agent"," "]})}),(!h||0==h.length)&&(0,t.jsxs)("div",{className:"text-sm border  rounded text-secondary p-2 my-2",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 inline mr-1"}),"No models currently linked to this agent. Please add a model using the button below."]}),(0,t.jsxs)("div",{className:"flex flex-wrap",children:[J,(0,t.jsx)(()=>(0,t.jsx)(p.A,{menu:{items:S,onClick:C},placement:"bottomRight",trigger:["click"],dropdownRender:e=>(0,t.jsxs)("div",{style:P,children:[a.cloneElement(e,{style:I}),0===r.length&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.A,{style:{margin:0}}),(0,t.jsx)(T.A,{style:{padding:8}}),(0,t.jsx)("div",{className:"p-3",children:(0,t.jsxs)("span",{className:"text-xs",children:[" ",(0,t.jsx)(F.A,{className:"w-4 h-4 inline-block mr-1"})," ","Please create models in the Model tab"]})})]})]}),children:(0,t.jsxs)("div",{className:"inline-flex mr-1 mb-1 p-1 px-2 rounded border hover:border-accent duration-300 hover:text-accent",role:"button",children:["add ",(0,t.jsx)(c.A,{className:"w-4 h-4 inline-block mt-1"})]})}),{})]})]})},B=e=>{let{workflowId:s}=e,[l,n]=(0,a.useState)(null),[i,o]=(0,a.useState)(!1),[r,u]=(0,a.useState)([]),[h,x]=(0,a.useState)([]),[v,y]=(0,a.useState)([]),f=(0,j.Tt)(),{user:N}=a.useContext(g.v),k="".concat(f,"/agents?user_id=").concat(null==N?void 0:N.email),A=()=>{n(null),o(!0),(0,j.hI)(k,{method:"GET",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?u(e.data):m.Ay.error(e.message),o(!1)},e=>{n(e),m.Ay.error(e.message),o(!1)})},b=(e,l)=>{let t="".concat(f,"/workflows/link/agent/").concat(s,"/").concat(l);n(null),o(!0),(0,j.hI)(t,{method:"GET",headers:{"Content-Type":"application/json"}},s=>{s&&s.status?e(s.data):m.Ay.error(s.message),o(!1)},e=>{n(e),m.Ay.error(e.message),o(!1)})},w=(e,s,l)=>{n(null),o(!0);let t="".concat(f,"/workflows/link/agent/").concat(e,"/").concat(s,"/").concat(l);(0,j.hI)(t,{method:"POST",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?(m.Ay.success(e.message),"sender"===l?b(x,"sender"):b(y,"receiver")):m.Ay.error(e.message),o(!1)},e=>{n(e),m.Ay.error(e.message),o(!1)})},S=(e,s,l)=>{n(null),o(!0);let t="".concat(f,"/workflows/link/agent/").concat(e,"/").concat(s,"/").concat(l);(0,j.hI)(t,{method:"DELETE",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?(m.Ay.success(e.message),"sender"===l?b(x,"sender"):b(y,"receiver")):m.Ay.error(e.message),o(!1)},e=>{n(e),m.Ay.error(e.message),o(!1)})};(0,a.useEffect)(()=>{A(),b(x,"sender"),b(y,"receiver")},[]);let C=r.length>0?r.map((e,s)=>({key:s,label:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:e.config.name}),(0,t.jsx)("div",{className:"text-xs text-accent",children:(0,j.EJ)(e.config.description||"",20)})]}),value:s})):[{key:-1,label:(0,t.jsx)(t.Fragment,{children:"No agents found"}),value:0}],I=(e,l)=>{let t=("sender"===l?h:v)[e];t&&t.id&&S(s,t.id,l)},{token:O}=R(),P={backgroundColor:O.colorBgElevated,borderRadius:O.borderRadiusLG,boxShadow:O.boxShadowSecondary},D=e=>{let{title:s,onClick:l,agentType:n}=e,i="sender"===n?h:v,o=i.map((e,s)=>{let l=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:e.config.name}),(0,t.jsx)("div",{className:"text-xs text-accent",children:(0,j.EJ)(e.config.description||"",90)})]});return(0,t.jsx)("div",{className:"mr-1 mb-1 p-1 px-2 rounded border",children:(0,t.jsxs)("div",{className:"inline-flex",children:[" ",(0,t.jsxs)(E.A,{title:l,children:[(0,t.jsx)("div",{children:e.config.name})," "]}),(0,t.jsx)("div",{role:"button",onClick:e=>{e.stopPropagation(),I(s,n)},className:"ml-1 text-primary hover:text-accent duration-300",children:(0,t.jsx)(M.A,{className:"w-4 h-4 inline-block"})})]})},"agentrow_"+s)});return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[(!i||0===i.length)&&(0,t.jsxs)("div",{className:"text-sm border rounded text-secondary p-2 my-2",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 inline mr-1"})," No"," ",s," agent linked to this workflow."]}),(0,t.jsxs)("div",{className:"flex flex-wrap",children:[o," "]})]}),i&&1==i.length&&(0,t.jsxs)("div",{className:"text-xs my-2",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 inline mr-1"})," you can remove current agents and add new ones."]}),i&&i.length<1&&(0,t.jsx)(p.A,{menu:{items:C,onClick:l},placement:"bottomRight",trigger:["click"],dropdownRender:e=>(0,t.jsxs)("div",{style:P,children:[a.cloneElement(e,{style:{boxShadow:"none"}}),0===r.length&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.A,{style:{margin:0}}),(0,t.jsx)(T.A,{style:{padding:8}}),(0,t.jsxs)("div",{className:"p-3",children:[" ",(0,t.jsxs)("span",{className:"text-xs",children:[(0,t.jsx)(F.A,{className:"w-4 h-4 inline-block mr-1"})," ","Please create agents in the Agents tab"]})]})]})]}),children:(0,t.jsxs)("div",{className:"pt-2 border-dashed border-t mt-2",children:[" ",(0,t.jsxs)("div",{className:" inline-flex mr-1 mb-1 p-1 px-2 rounded border hover:border-accent duration-300 hover:text-accent",role:"button",children:["Add ",s," ",(0,t.jsx)(c.A,{className:"w-4 h-4 inline-block mt-1"})]})]})})]})};return(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-sm mb-2",children:["Initiator"," ",(0,t.jsx)(E.A,{title:"Agent that initiates the conversation",children:(0,t.jsx)(d.A,{className:"h-4 w-4 inline-block"})})]}),(0,t.jsx)("ul",{children:(0,t.jsx)(D,{title:"Sender",onClick:e=>{let{key:l}=e,t=r[parseInt(l.toString())];t&&t.id&&w(s,t.id,"sender")},agentType:"sender"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm mb-2",children:"Receiver"}),(0,t.jsx)("ul",{children:(0,t.jsx)(D,{title:"Receiver",onClick:e=>{let{key:l}=e,t=r[parseInt(l.toString())];t&&t.id&&w(s,t.id,"receiver")},agentType:"receiver"})})]})]})})};var W=l(64929);let{useToken:V}=f.A,z=e=>{var s,l,n,i,o,r,c,d,u;let{agent:p,setAgent:y,close:f}=e,b=(0,j.rn)(null==p?void 0:null===(s=p.config)||void 0===s?void 0:s.name),[w,S]=a.useState(null),[C,_]=a.useState(!1),{user:T}=a.useContext(g.v),E=(0,j.Tt)(),F="".concat(E,"/agents"),[M,I]=a.useState(!1),O=(e,s)=>{y({...p,config:{...p.config,[s]:e}}),I(!0)},P=(null==p?void 0:null===(l=p.config)||void 0===l?void 0:l.llm_config)||{config_list:[],temperature:.1,max_tokens:1e3},R=e=>{S(null),_(!0),console.log("agent",e),e.user_id=null==T?void 0:T.email;let s={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)};(0,j.hI)(F,s,e=>{e&&e.status?(m.Ay.success(e.message),console.log("agents",e.data),y(e.data)):m.Ay.error(e.message),_(!1)},e=>{S(e),m.Ay.error(e.message),_(!1)},()=>{_(!1),I(!1)})},D=(!M||!b.status)&&(null==p?void 0:p.id)!==void 0;return(0,t.jsxs)("div",{className:"text-primary",children:[(0,t.jsx)(N.A,{children:(0,t.jsxs)("div",{className:"grid  gap-3 ".concat("groupchat"===p.type?"grid-cols-2":"grid-cols-1"),children:[(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)(v.hF,{title:"Agent Name",className:"",description:"Name of the agent",value:null==p?void 0:null===(n=p.config)||void 0===n?void 0:n.name,control:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{className:"mt-2",placeholder:"Agent Name",value:null==p?void 0:null===(i=p.config)||void 0===i?void 0:i.name,onChange:e=>{O(e.target.value,"name")}}),!b.status&&(0,t.jsx)("div",{className:"text-xs text-red-500 mt-2",children:b.message})]})}),(0,t.jsx)(v.hF,{title:"Agent Description",className:"mt-4",description:"Description of the agent, used by other agents   (e.g. the GroupChatManager) to decide when to call upon this agent. (Default: system_message)",value:p.config.description||"",control:(0,t.jsx)(x.A,{className:"mt-2",placeholder:"Agent Description",value:p.config.description||"",onChange:e=>{O(e.target.value,"description")}})}),(0,t.jsx)(v.hF,{title:"Max Consecutive Auto Reply",className:"mt-4",description:"Max consecutive auto reply messages before termination.",value:null===(o=p.config)||void 0===o?void 0:o.max_consecutive_auto_reply,control:(0,t.jsx)(k.A,{min:1,max:"groupchat"===p.type?600:30,defaultValue:p.config.max_consecutive_auto_reply,step:1,onChange:e=>{O(e,"max_consecutive_auto_reply")}})}),(0,t.jsx)(v.hF,{title:"Human Input Mode",description:"Defines when to request human input",value:p.config.human_input_mode,control:(0,t.jsx)(A.A,{className:"mt-2 w-full",defaultValue:p.config.human_input_mode,onChange:e=>{O(e,"human_input_mode")},options:[{label:"NEVER",value:"NEVER"}]})}),(0,t.jsx)(v.hF,{title:"System Message",className:"mt-4",description:"Free text to control agent behavior",value:p.config.system_message,control:(0,t.jsx)(W.A,{className:"mt-2 w-full",value:p.config.system_message,rows:3,onChange:e=>{O(e.target.value,"system_message")}})}),(0,t.jsxs)("div",{className:"mt-4",children:[" ",(0,t.jsxs)(v.Jv,{className:"bg-secondary mt-4",open:!1,title:"Advanced Options",children:[(0,t.jsx)(v.hF,{title:"Temperature",className:"mt-4",description:"Defines the randomness of the agent's response.",value:P.temperature,control:(0,t.jsx)(k.A,{min:0,max:2,step:.1,defaultValue:P.temperature||.1,onChange:e=>{O({...p.config.llm_config,temperature:e},"llm_config")}})}),(0,t.jsx)(v.hF,{title:"Agent Default Auto Reply",className:"mt-4",description:"Default auto reply when no code execution or llm-based reply is generated.",value:p.config.default_auto_reply||"",control:(0,t.jsx)(x.A,{className:"mt-2",placeholder:"Agent Description",value:p.config.default_auto_reply||"",onChange:e=>{O(e.target.value,"default_auto_reply")}})}),(0,t.jsx)(v.hF,{title:"Max Tokens",description:"Max tokens generated by LLM used in the agent's response.",value:P.max_tokens,className:"mt-4",control:(0,t.jsx)(k.A,{min:100,max:5e4,defaultValue:P.max_tokens||1e3,onChange:e=>{O({...p.config.llm_config,max_tokens:e},"llm_config")}})}),(0,t.jsx)(v.hF,{title:"Code Execution Config",className:"mt-4",description:"Determines if and where code execution is done.",value:p.config.code_execution_config||"none",control:(0,t.jsx)(A.A,{className:"mt-2 w-full",defaultValue:p.config.code_execution_config||"none",onChange:e=>{O(e,"code_execution_config")},options:[{label:"None",value:"none"},{label:"Local",value:"local"},{label:"Docker",value:"docker"}]})})]})]})]}),"groupchat"===p.type&&(0,t.jsxs)("div",{children:[(0,t.jsx)(v.hF,{title:"Speaker Selection Method",description:"How the next speaker is selected",className:"",value:(null==p?void 0:null===(r=p.config)||void 0===r?void 0:r.speaker_selection_method)||"auto",control:(0,t.jsx)(A.A,{className:"mt-2 w-full",defaultValue:(null==p?void 0:null===(c=p.config)||void 0===c?void 0:c.speaker_selection_method)||"auto",onChange:e=>{(null==p?void 0:p.config)&&O(e,"speaker_selection_method")},options:[{label:"Auto",value:"auto"},{label:"Round Robin",value:"round_robin"},{label:"Random",value:"random"}]})}),(0,t.jsx)(v.hF,{title:"Admin Name",className:"mt-4",description:"Name of the admin of the group chat",value:p.config.admin_name||"",control:(0,t.jsx)(x.A,{className:"mt-2",placeholder:"Agent Description",value:p.config.admin_name||"",onChange:e=>{O(e.target.value,"admin_name")}})}),(0,t.jsx)(v.hF,{title:"Max Rounds",className:"mt-4",description:"Max rounds before termination.",value:(null===(d=p.config)||void 0===d?void 0:d.max_round)||10,control:(0,t.jsx)(k.A,{min:10,max:600,defaultValue:p.config.max_round,step:1,onChange:e=>{O(e,"max_round")}})}),(0,t.jsx)(v.hF,{title:"Allow Repeat Speaker",className:"mt-4",description:"Allow the same speaker to speak multiple times in a row",value:(null===(u=p.config)||void 0===u?void 0:u.allow_repeat_speaker)||!1,control:(0,t.jsx)(A.A,{className:"mt-2 w-full",defaultValue:p.config.allow_repeat_speaker,onChange:e=>{O(e,"allow_repeat_speaker")},options:[{label:"True",value:!0},{label:"False",value:!1}]})})]})]})}),(0,t.jsxs)("div",{className:"w-full mt-4 text-right",children:[" ",!D&&(0,t.jsx)(h.Ay,{type:"primary",onClick:()=>{R(p),y(p)},loading:C,children:p.id?"Update Agent":"Create Agent"}),(0,t.jsx)(h.Ay,{className:"ml-2",type:"default",onClick:()=>{f()},children:"Close"},"close")]})]})},H=e=>{let{agent:s,setAgent:l,close:a}=e,n=[{label:(0,t.jsxs)("div",{className:"w-full  ",children:[" ",(0,t.jsx)(w.A,{className:"h-4 w-4 inline-block mr-1"}),"Agent Configuration"]}),key:"1",children:(0,t.jsxs)("div",{children:[!(null==s?void 0:s.type)&&(0,t.jsx)(J,{agent:s,setAgent:l}),(null==s?void 0:s.type)&&s&&(0,t.jsx)(z,{agent:s,setAgent:l,close:a})]})}];return s&&(null==s?void 0:s.id)&&(s.type&&"groupchat"===s.type&&n.push({label:(0,t.jsxs)("div",{className:"w-full  ",children:[" ",(0,t.jsx)(S.A,{className:"h-4 w-4 inline-block mr-1"}),"Agents"]}),key:"2",children:(0,t.jsx)(G,{agentId:null==s?void 0:s.id})}),n.push({label:(0,t.jsxs)("div",{className:"w-full  ",children:[" ",(0,t.jsx)(C.A,{className:"h-4 w-4 inline-block mr-1"}),"Models"]}),key:"3",children:(0,t.jsx)(U,{agentId:null==s?void 0:s.id})}),n.push({label:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.A,{className:"h-4 w-4 inline-block mr-1"}),"Skills"]}),key:"4",children:(0,t.jsx)(D,{agentId:null==s?void 0:s.id})})),(0,t.jsx)("div",{className:"text-primary",children:(0,t.jsx)(b.A,{tabBarStyle:{paddingLeft:0,marginLeft:0},defaultActiveKey:"1",items:n})})},Z=e=>{let{}=e,[s,l]=a.useState(!1),[h,x]=a.useState({status:!0,message:"All good"}),{user:y}=a.useContext(g.v),f=(0,j.Tt)(),N="".concat(f,"/agents?user_id=").concat(null==y?void 0:y.email),[k,A]=a.useState([]),[b,w]=a.useState(null),[S,C]=a.useState(!1),[_,T]=a.useState(!1),E={config:{name:"sample_agent",description:"Sample agent description",human_input_mode:"NEVER",max_consecutive_auto_reply:3,system_message:""}},[F,M]=a.useState(E),I=e=>{x(null),l(!0);let s="".concat(f,"/agents/delete?user_id=").concat(null==y?void 0:y.email,"&agent_id=").concat(e.id),t={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:null==y?void 0:y.email,agent:e})};(0,j.hI)(s,t,e=>{e&&e.status?(m.Ay.success(e.message),O()):m.Ay.error(e.message),l(!1)},e=>{x(e),m.Ay.error(e.message),l(!1)})},O=()=>{x(null),l(!0),(0,j.hI)(N,{method:"GET",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?A(e.data):m.Ay.error(e.message),l(!1)},e=>{x(e),m.Ay.error(e.message),l(!1)})};a.useEffect(()=>{y&&O()},[]);let P=(k||[]).map((e,s)=>{let l=[{title:"Download",icon:n.A,onClick:s=>{s.stopPropagation();let l=document.createElement("a"),t=new Blob([JSON.stringify((0,j.E5)(e))],{type:"application/json"});l.href=URL.createObjectURL(t),l.download="agent_".concat(e.config.name,".json"),document.body.appendChild(l),l.click()},hoverText:"Download"},{title:"Make a Copy",icon:i.A,onClick:s=>{s.stopPropagation();let l={...e};l.config.name="".concat(e.config.name,"_copy"),l.user_id=null==y?void 0:y.email,l.updated_at=new Date().toISOString(),l.id&&delete l.id,M(l),C(!0)},hoverText:"Make a Copy"},{title:"Delete",icon:o.A,onClick:s=>{s.stopPropagation(),I(e)},hoverText:"Delete"}];return(0,t.jsx)("li",{role:"listitem",className:" ",style:{width:"200px"},children:(0,t.jsxs)(v.Zp,{className:"h-full p-2 cursor-pointer",title:(0,t.jsx)("div",{className:"  ",children:(0,j.EJ)(e.config.name||"",25)}),onClick:()=>{w(e),T(!0)},children:[(0,t.jsxs)("div",{style:{minHeight:"65px"},"aria-hidden":"true",className:"my-2   break-words",children:[" ",(0,j.EJ)(e.config.description||"",70)]}),(0,t.jsx)("div",{"aria-label":"Updated ".concat((0,j.fF)(e.updated_at||"")),className:"text-xs",children:(0,j.fF)(e.updated_at||"")}),(0,t.jsx)(v.O8,{items:l})]})},"agentrow"+s)}),R=e=>{let{agent:s,setAgent:l,showAgentModal:n,setShowAgentModal:i,handler:o}=e,[r,c]=a.useState(s),d=()=>{i(!1),o&&o(r)};return(0,t.jsx)(u.A,{title:(0,t.jsx)(t.Fragment,{children:"Agent Configuration"}),width:800,open:n,onOk:()=>{d()},onCancel:()=>{d()},footer:[],children:s&&(0,t.jsx)(H,{agent:r||s,setAgent:c,close:d})})},D=()=>{let e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>{let s=e.target.files[0],l=new FileReader;l.onload=e=>{let s=e.target.result;if(s)try{let e=JSON.parse(s);if(!e.config)throw Error("Invalid agent file. An agent must have a config");M(e),C(!0)}catch(e){m.Ay.error("Invalid agent file. Please upload a valid agent file.")}},l.readAsText(s)},e.click()},J=[{key:"uploadagent",label:(0,t.jsxs)("div",{children:[(0,t.jsx)(r.A,{className:"w-5 h-5 inline-block mr-2"}),"Upload Agent"]})}];return(0,t.jsxs)("div",{className:"text-primary  ",children:[(0,t.jsx)(R,{agent:b,setAgent:w,setShowAgentModal:T,showAgentModal:_,handler:e=>{O()}}),(0,t.jsx)(R,{agent:F||E,setAgent:M,setShowAgentModal:C,showAgentModal:S,handler:e=>{O()}}),(0,t.jsx)("div",{className:"mb-2   relative",children:(0,t.jsxs)("div",{className:"     rounded  ",children:[(0,t.jsxs)("div",{className:"flex mt-2 pb-2 mb-2 border-b",children:[(0,t.jsxs)("div",{className:"flex-1 font-semibold mb-2 ",children:[" ","Agents (",P.length,")"," "]}),(0,t.jsx)("div",{children:(0,t.jsxs)(p.A.Button,{type:"primary",menu:{items:J,onClick:e=>{let{key:s}=e;if("uploadagent"===s){D();return}}},placement:"bottomRight",trigger:["click"],onClick:()=>{C(!0)},children:[(0,t.jsx)(c.A,{className:"w-5 h-5 inline-block mr-1"}),"New Agent"]})})]}),(0,t.jsxs)("div",{className:"text-xs mb-2 pb-1  ",children:[" ","Configure an agent that can reused in your agent workflow"," ",null==b?void 0:b.config.name]}),k&&k.length>0&&(0,t.jsxs)("div",{className:"w-full  relative",children:[(0,t.jsx)(v.p8,{loading:s}),(0,t.jsx)("ul",{className:"   flex flex-wrap gap-3",children:P})]}),k&&0===k.length&&!s&&(0,t.jsxs)("div",{className:"text-sm border mt-4 rounded text-secondary p-2",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 inline mr-1"}),"No agents found. Please create a new agent."]}),s&&(0,t.jsxs)("div",{className:"  w-full text-center",children:[" ",(0,t.jsx)(v.g0,{})," ",(0,t.jsx)("span",{className:"inline-block",children:" loading .. "})]})]})})]})};var K=l(94090),Y=l(82133),q=l(18593);let Q=e=>{let{workflow:s,setWorkflow:l,close:n}=e,[i,o]=a.useState(!1),[r,c]=a.useState(null),{user:d}=a.useContext(g.v),u=(0,j.Tt)(),p="".concat(u,"/workflows"),[y,f]=a.useState(!1),[N,k]=a.useState(s),b=(e,t)=>{let a={...s,[e]:t};k(a),l(a),f(!0)},w=e=>{c(null),o(!0),e.user_id=null==d?void 0:d.email;let s={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)};(0,j.hI)(p,s,e=>{e&&e.status?(m.Ay.success(e.message),l(e.data)):m.Ay.error(e.message),o(!1)},e=>{c(e),m.Ay.error(e.message),o(!1)},()=>{o(!1),f(!1)})},S=!y&&void 0!==s.id,[C,_]=a.useState(!1),T={user_id:(null==d?void 0:d.email)||"test_session_user_id",workflow_id:null==s?void 0:s.id,name:"test_session"};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(v.hF,{title:"Workflow Name",className:"mt-4 mb-2",description:"Name of the workflow",value:N.name,control:(0,t.jsx)(x.A,{className:"mt-2 w-full",value:N.name,onChange:e=>b("name",e.target.value)})}),(0,t.jsx)(v.hF,{title:"Workflow Description",className:"mt-4 mb-2",description:"Description of the workflow",value:N.description,control:(0,t.jsx)(x.A,{className:"mt-2 w-full",value:N.description,onChange:e=>b("description",e.target.value)})}),(0,t.jsx)(v.hF,{title:"Summary Method",description:"Defines the method to summarize the conversation",value:N.summary_method||"last",control:(0,t.jsx)(A.A,{className:"mt-2 w-full",defaultValue:N.summary_method||"last",onChange:e=>b("summary_method",e),options:[{label:"last",value:"last"},{label:"none",value:"none"},{label:"llm",value:"llm"}]})})]}),(0,t.jsxs)("div",{className:"w-full mt-4 text-right",children:[" ",!S&&(0,t.jsx)(h.Ay,{type:"primary",onClick:()=>{w(N)},loading:i,children:s.id?"Update Workflow":"Create Workflow"}),(null==s?void 0:s.id)&&(0,t.jsx)(h.Ay,{className:"ml-2",type:"primary",onClick:()=>{_(!0)},children:"Test Workflow"}),(0,t.jsx)(h.Ay,{className:"ml-2",type:"default",onClick:()=>{n()},children:"Close"},"close")]}),(0,t.jsx)(Y.A,{title:(0,t.jsx)("div",{children:(null==s?void 0:s.name)||"Test Workflow"}),size:"large",onClose:()=>{_(!1)},open:C,children:(0,t.jsx)("div",{className:"h-full ",children:C&&(0,t.jsx)(q.A,{initMessages:[],session:T,heightOffset:100})})})]})},X=e=>{let{workflow:s,setWorkflow:l,close:n}=e,i=[{label:(0,t.jsxs)("div",{className:"w-full  ",children:[" ",(0,t.jsx)(w.A,{className:"h-4 w-4 inline-block mr-1"}),"Workflow Configuration"]}),key:"1",children:(0,t.jsxs)("div",{children:[!(null==s?void 0:s.type)&&(0,t.jsx)(L,{workflow:s,setWorkflow:l}),(null==s?void 0:s.type)&&s&&(0,t.jsx)(Q,{workflow:s,setWorkflow:l,close:n})]})}];s&&(null==s?void 0:s.id)&&i.push({label:(0,t.jsxs)("div",{className:"w-full  ",children:[" ",(0,t.jsx)(S.A,{className:"h-4 w-4 inline-block mr-1"}),"Agents"]}),key:"2",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(B,{workflowId:s.id})," "]})});let{user:o}=a.useContext(g.v);return(0,t.jsx)("div",{className:"text-primary",children:(0,t.jsx)(b.A,{tabBarStyle:{paddingLeft:0,marginLeft:0},defaultActiveKey:"1",items:i})})},$=e=>{let{}=e,[s,l]=a.useState(!1),[h,x]=a.useState({status:!0,message:"All good"}),{user:y}=a.useContext(g.v),f=(0,j.Tt)(),N="".concat(f,"/workflows?user_id=").concat(null==y?void 0:y.email),[k,A]=a.useState([]),[b,w]=a.useState(null),C=(0,j.Yj)(),[_,T]=a.useState(C),[E,F]=a.useState(!1),[M,I]=a.useState(!1),O=()=>{x(null),l(!0),(0,j.hI)(N,{method:"GET",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?A(e.data):m.Ay.error(e.message),l(!1)},e=>{x(e),m.Ay.error(e.message),l(!1)})},P=e=>{x(null),l(!0);let s="".concat(f,"/workflows/delete?user_id=").concat(null==y?void 0:y.email,"&workflow_id=").concat(e.id),t={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:null==y?void 0:y.email,workflow:e})};(0,j.hI)(s,t,e=>{e&&e.status?(m.Ay.success(e.message),O()):m.Ay.error(e.message),l(!1)},e=>{x(e),m.Ay.error(e.message),l(!1)})};a.useEffect(()=>{y&&O()},[]),a.useEffect(()=>{b&&F(!0)},[b]);let R=(k||[]).map((e,s)=>{let l=[{title:"Download",icon:n.A,onClick:s=>{s.stopPropagation();let l=document.createElement("a"),t=new Blob([JSON.stringify((0,j.E5)(e))],{type:"application/json"});l.href=URL.createObjectURL(t),l.download="workflow_".concat(e.name,".json"),document.body.appendChild(l),l.click()},hoverText:"Download"},{title:"Make a Copy",icon:i.A,onClick:s=>{s.stopPropagation();let l={...e};l.name="".concat(e.name," Copy"),l.user_id=null==y?void 0:y.email,l.id&&delete l.id,T(l),I(!0)},hoverText:"Make a Copy"},{title:"Delete",icon:o.A,onClick:s=>{s.stopPropagation(),P(e)},hoverText:"Delete"}];return(0,t.jsx)("li",{className:"block   h-full",style:{width:"200px"},children:(0,t.jsxs)(v.Zp,{className:"  block p-2 cursor-pointer",title:(0,t.jsx)("div",{className:"  ",children:(0,j.EJ)(e.name,25)}),onClick:()=>{w(e)},children:[(0,t.jsxs)("div",{style:{minHeight:"65px"},className:"break-words  my-2","aria-hidden":"true",children:[" ",(0,j.EJ)(e.description,70)]}),(0,t.jsx)("div",{"aria-label":"Updated ".concat((0,j.fF)(e.updated_at||"")," ago"),className:"text-xs",children:(0,j.fF)(e.updated_at||"")}),(0,t.jsx)(v.O8,{items:l})]})},"workflowrow"+s)}),D=e=>{let{workflow:s,setWorkflow:l,showModal:n,setShowModal:i,handler:o}=e,[r,c]=a.useState(s),d=()=>{i(!1),o&&o(r)};return(0,t.jsx)(u.A,{title:(0,t.jsxs)(t.Fragment,{children:["Workflow Specification"," ",(0,t.jsx)("span",{className:"text-accent font-normal",children:null==r?void 0:r.name})," "]}),width:800,open:n,onOk:()=>{d()},onCancel:()=>{d()},footer:[],children:(0,t.jsx)(t.Fragment,{children:r&&(0,t.jsx)(X,{workflow:r,setWorkflow:c,close:d})})})},J=()=>{let e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>{let s=e.target.files[0],l=new FileReader;l.onload=e=>{let s=e.target.result;if(s)try{let e=JSON.parse(s);T(e),I(!0)}catch(e){m.Ay.error("Invalid workflow file")}},l.readAsText(s)},e.click()},L=[{key:"twoagents",label:(0,t.jsxs)("div",{children:[" ",(0,t.jsx)(K.A,{className:"w-5 h-5 inline-block mr-2"}),"Two Agents"]})},{key:"groupchat",label:(0,t.jsxs)("div",{children:[(0,t.jsx)(S.A,{className:"w-5 h-5 inline-block mr-2"}),"Group Chat"]})},{type:"divider"},{key:"uploadworkflow",label:(0,t.jsxs)("div",{children:[(0,t.jsx)(r.A,{className:"w-5 h-5 inline-block mr-2"}),"Upload Workflow"]})}],G=e=>{w(e),F(!0)};return(0,t.jsxs)("div",{className:" text-primary ",children:[(0,t.jsx)(D,{workflow:b,setWorkflow:w,showModal:E,setShowModal:F,handler:e=>{O()}}),(0,t.jsx)(D,{workflow:_,showModal:M,setShowModal:I,handler:e=>{O()}}),(0,t.jsx)("div",{className:"mb-2   relative",children:(0,t.jsxs)("div",{className:"     rounded  ",children:[(0,t.jsxs)("div",{className:"flex mt-2 pb-2 mb-2 border-b",children:[(0,t.jsxs)("div",{className:"flex-1 font-semibold  mb-2 ",children:[" ","Workflows (",R.length,")"," "]}),(0,t.jsx)("div",{className:" ",children:(0,t.jsxs)(p.A.Button,{type:"primary",menu:{items:L,onClick:e=>{let{key:s}=e;if("uploadworkflow"===s){J();return}G((0,j.Yj)(s))}},placement:"bottomRight",trigger:["click"],onClick:()=>{G((0,j.Yj)())},children:[(0,t.jsx)(c.A,{className:"w-5 h-5 inline-block mr-1"}),"New Workflow"]})})]}),(0,t.jsxs)("div",{className:"text-xs mb-2 pb-1  ",children:[" ","Configure an agent workflow that can be used to handle tasks."]}),k&&k.length>0&&(0,t.jsxs)("div",{className:"w-full relative",children:[(0,t.jsx)(v.p8,{loading:s}),(0,t.jsx)("ul",{className:"flex flex-wrap gap-3",children:R})]}),k&&0===k.length&&!s&&(0,t.jsxs)("div",{className:"text-sm border mt-4 rounded text-secondary p-2",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 inline mr-1"}),"No workflows found. Please create a new workflow."]}),s&&(0,t.jsxs)("div",{className:"  w-full text-center",children:[" ",(0,t.jsx)(v.g0,{})," ",(0,t.jsx)("span",{className:"inline-block",children:" loading .. "})]})]})})]})};var ee=l(60853),es=l(9347);let el=e=>{let{model:s,setModel:l}=e,n=[{label:"OpenAI",value:"open_ai",description:"OpenAI or other endpoints that implement the OpenAI API",icon:(0,t.jsx)(C.A,{className:"h-6 w-6 text-primary"})},{label:"Azure OpenAI",value:"azure",description:"Azure OpenAI endpoint",icon:(0,t.jsx)(C.A,{className:"h-6 w-6 text-primary"})},{label:"Gemini",value:"google",description:"Gemini",icon:(0,t.jsx)(C.A,{className:"h-6 w-6 text-primary"})}],[i,o]=a.useState(null==s?void 0:s.api_type),r=n.map((e,a)=>(0,t.jsx)("li",{onMouseEnter:()=>{m(e.value)},role:"listitem",className:"w-36",children:(0,t.jsx)(v.Zp,{active:i===e.value,className:"h-full p-2 cursor-pointer",title:(0,t.jsx)("div",{className:"  ",children:e.label}),onClick:()=>{o(e.value),s&&l((0,j.AQ)(e.value))},children:(0,t.jsxs)("div",{style:{minHeight:"35px"},className:"my-2   break-words ",children:[" ",(0,t.jsx)("div",{className:"mb-2",children:e.icon}),(0,t.jsxs)("span",{className:"text-secondary  tex-sm",children:[" ",e.description]})]})})},"modeltype"+a)),[c,m]=a.useState("open_ai");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pb-3",children:"Select Model Type"}),(0,t.jsx)("ul",{className:"inline-flex gap-2",children:r}),(0,t.jsxs)("div",{className:"text-xs mt-4",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 inline mr-1 -mt-1"}),{open_ai:"In addition to OpenAI models, You can also use OSS models via tools like Ollama, vLLM, LMStudio etc. that provide OpenAI compatible endpoint.",azure:"Azure OpenAI endpoint",google:"Gemini"}[c]]})]})},et=e=>{let{model:s,setModel:l,close:n}=e,[i,o]=a.useState(!1),[r,c]=a.useState(null),u=(0,j.Tt)(),{user:p}=a.useContext(g.v),y="".concat(u,"/models/test"),f="".concat(u,"/models"),N=e=>{c(null),o(!0),e.user_id=null==p?void 0:p.email;let s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};(0,j.hI)(y,s,e=>{e&&e.status?(m.Ay.success(e.message),c(e.data)):m.Ay.error(e.message),o(!1),c(e)},e=>{m.Ay.error(e.message),o(!1)})},k=e=>{o(!0),e.user_id=null==p?void 0:p.email;let s={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)};(0,j.hI)(f,s,e=>{e&&e.status?(m.Ay.success(e.message),l(e.data)):m.Ay.error(e.message),o(!1)},e=>{m.Ay.error(e.message),o(!1)},()=>{o(!1),b(!1)})},[A,b]=a.useState(!1),w=(e,t)=>{s&&l({...s,[e]:t}),b(!0)},S=!A&&void 0!==s.id;return(0,t.jsxs)("div",{className:"relative ",children:[(0,t.jsxs)("div",{className:"text-sm my-2",children:["Enter parameters for your"," ",(0,t.jsx)("span",{className:"mx-1 text-accent",children:s.api_type})," model."]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(v.hF,{title:"Model",className:"",description:"Model name",value:(null==s?void 0:s.model)||"",control:(0,t.jsx)(x.A,{className:"mt-2 w-full",value:null==s?void 0:s.model,onChange:e=>{w("model",e.target.value)}})}),(0,t.jsx)(v.hF,{title:"Base URL",className:"",description:"Base URL for Model Endpoint",value:(null==s?void 0:s.base_url)||"",control:(0,t.jsx)(x.A,{className:"mt-2 w-full",value:null==s?void 0:s.base_url,onChange:e=>{w("base_url",e.target.value)}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(v.hF,{title:"API Key",className:"",description:"API Key",value:(null==s?void 0:s.api_key)||"",truncateLength:5,control:(0,t.jsx)(x.A.Password,{className:"mt-2 w-full",value:null==s?void 0:s.api_key,onChange:e=>{w("api_key",e.target.value)}})}),(null==s?void 0:s.api_type)=="azure"&&(0,t.jsx)(v.hF,{title:"API Version",className:" ",description:"API Version, required by Azure Models",value:(null==s?void 0:s.api_version)||"",control:(0,t.jsx)(x.A,{className:"mt-2 w-full",value:null==s?void 0:s.api_version,onChange:e=>{w("api_version",e.target.value)}})})]})]}),(0,t.jsx)(v.hF,{title:"Description",className:"mt-4",description:"Description of the model",value:(null==s?void 0:s.description)||"",control:(0,t.jsx)(W.A,{className:"mt-2 w-full",value:null==s?void 0:s.description,onChange:e=>{w("description",e.target.value)}})}),(null==s?void 0:s.api_type)==="azure"&&(0,t.jsx)("div",{className:"mt-4 text-xs",children:"Note: For Azure OAI models, you will need to specify all fields."}),r&&(0,t.jsxs)("div",{className:"text-sm border mt-4 rounded text-secondary p-2 ".concat(r.status?"border-accent":" border-red-500 "),children:[(0,t.jsx)(d.A,{className:"h-4 w-4 inline mr-1"}),r.message]}),(0,t.jsxs)("div",{className:"w-full mt-4 text-right",children:[(0,t.jsx)(h.Ay,{type:"primary",loading:i,onClick:()=>{s&&N(s)},children:"Test Model"},"test"),!S&&(0,t.jsx)(h.Ay,{className:"ml-2",type:"primary",onClick:()=>{s&&(k(s),l(s))},children:(null==s?void 0:s.id)?"Update Model":"Save Model"},"save"),(0,t.jsx)(h.Ay,{className:"ml-2",type:"default",onClick:()=>{n()},children:"Close"},"close")]})]})},ea=e=>{let{model:s,setModel:l,close:a}=e;return(0,t.jsx)("div",{className:"text-primary",children:(0,t.jsxs)("div",{children:[!(null==s?void 0:s.api_type)&&(0,t.jsx)(el,{model:s,setModel:l}),(null==s?void 0:s.api_type)&&s&&(0,t.jsx)(et,{model:s,setModel:l,close:a})]})})},en=e=>{let{}=e,[s,l]=a.useState(!1),[h,x]=a.useState({status:!0,message:"All good"}),{user:y}=a.useContext(g.v),f=(0,j.Tt)(),N="".concat(f,"/models?user_id=").concat(null==y?void 0:y.email),k={model:"gpt-4-1106-preview",description:"Sample OpenAI GPT-4 model",user_id:null==y?void 0:y.email},[A,b]=a.useState([]),[w,S]=a.useState(null),[C,_]=a.useState(k),[T,E]=a.useState(!1),[F,M]=a.useState(!1),I=e=>{x(null),l(!0);let s="".concat(f,"/models/delete?user_id=").concat(null==y?void 0:y.email,"&model_id=").concat(e.id);(0,j.hI)(s,{method:"DELETE",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?(m.Ay.success(e.message),O()):m.Ay.error(e.message),l(!1)},e=>{x(e),m.Ay.error(e.message),l(!1)})},O=()=>{x(null),l(!0),(0,j.hI)(N,{method:"GET",headers:{"Content-Type":"application/json"}},e=>{e&&e.status?b(e.data):m.Ay.error(e.message),l(!1)},e=>{x(e),m.Ay.error(e.message),l(!1)})};a.useEffect(()=>{y&&O()},[]);let P=(A||[]).map((e,s)=>{let l=[{title:"Download",icon:n.A,onClick:s=>{s.stopPropagation();let l=document.createElement("a"),t=new Blob([JSON.stringify((0,j.E5)(e))],{type:"application/json"});l.href=URL.createObjectURL(t),l.download="model_".concat(e.model,".json"),document.body.appendChild(l),l.click()},hoverText:"Download"},{title:"Make a Copy",icon:i.A,onClick:s=>{s.stopPropagation();let l={...e};l.model="".concat(e.model," Copy"),l.user_id=null==y?void 0:y.email,l.updated_at=new Date().toISOString(),l.id&&delete l.id,_(l),E(!0)},hoverText:"Make a Copy"},{title:"Delete",icon:o.A,onClick:s=>{s.stopPropagation(),I(e)},hoverText:"Delete"}];return(0,t.jsx)("li",{role:"listitem",className:" ",style:{width:"200px"},children:(0,t.jsxs)(v.Zp,{className:"h-full p-2 cursor-pointer",title:(0,t.jsx)("div",{className:"  ",children:(0,j.EJ)(e.model||"",20)}),onClick:()=>{S(e),M(!0)},children:[(0,t.jsxs)("div",{style:{minHeight:"65px"},className:"my-2   break-words",children:[" ",(0,j.EJ)(e.description||e.model||"",70)]}),(0,t.jsx)("div",{"aria-label":"Updated ".concat((0,j.fF)(e.updated_at||"")," "),className:"text-xs",children:(0,j.fF)(e.updated_at||"")}),(0,t.jsx)(v.O8,{items:l})]})},"modelrow"+s)}),R=e=>{let{model:s,setModel:l,showModelModal:n,setShowModelModal:i,handler:o}=e,[r,c]=a.useState(s),d=()=>{l(null),i(!1),o&&o(s)};return(0,t.jsx)(u.A,{title:(0,t.jsxs)(t.Fragment,{children:["Model Specification"," ",(0,t.jsx)("span",{className:"text-accent font-normal",children:null==s?void 0:s.model})," "]}),width:800,open:n,footer:[],onOk:()=>{d()},onCancel:()=>{d()},children:s&&(0,t.jsx)(ea,{model:r,setModel:c,close:d})})},D=()=>{let e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>{let s=e.target.files[0],l=new FileReader;l.onload=e=>{let s=e.target.result;if(s)try{let e=JSON.parse(s);e&&(_(e),E(!0))}catch(e){m.Ay.error("Invalid model file")}},l.readAsText(s)},e.click()},J=[{key:"uploadmodel",label:(0,t.jsxs)("div",{children:[(0,t.jsx)(r.A,{className:"w-5 h-5 inline-block mr-2"}),"Upload Model"]})}];return(0,t.jsxs)("div",{className:"text-primary  ",children:[w&&(0,t.jsx)(R,{model:w,setModel:S,setShowModelModal:M,showModelModal:F,handler:e=>{O()}}),(0,t.jsx)(R,{model:C||k,setModel:_,setShowModelModal:E,showModelModal:T,handler:e=>{O()}}),(0,t.jsx)("div",{className:"mb-2   relative",children:(0,t.jsxs)("div",{className:"     rounded  ",children:[(0,t.jsxs)("div",{className:"flex mt-2 pb-2 mb-2 border-b",children:[(0,t.jsxs)("div",{className:"flex-1 font-semibold mb-2 ",children:[" ","Models (",P.length,")"," "]}),(0,t.jsx)("div",{children:(0,t.jsxs)(p.A.Button,{type:"primary",menu:{items:J,onClick:e=>{let{key:s}=e;if("uploadmodel"===s){D();return}}},placement:"bottomRight",trigger:["click"],onClick:()=>{E(!0)},children:[(0,t.jsx)(c.A,{className:"w-5 h-5 inline-block mr-1"}),"New Model"]})})]}),(0,t.jsxs)("div",{className:"text-xs mb-2 pb-1  ",children:[" ","Create model configurations that can be reused in your agents and workflows. ",null==w?void 0:w.model]}),A&&A.length>0&&(0,t.jsxs)("div",{className:"w-full  relative",children:[(0,t.jsx)(v.p8,{loading:s}),(0,t.jsx)("ul",{className:"   flex flex-wrap gap-3",children:P})]}),A&&0===A.length&&!s&&(0,t.jsxs)("div",{className:"text-sm border mt-4 rounded text-secondary p-2",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 inline mr-1"}),"No models found. Please create a new model which can be reused with agents."]}),s&&(0,t.jsxs)("div",{className:"  w-full text-center",children:[" ",(0,t.jsx)(v.g0,{})," ",(0,t.jsx)("span",{className:"inline-block",children:" loading .. "})]})]})})]})},ei=()=>(0,t.jsxs)("div",{className:" ",children:[(0,t.jsxs)("div",{className:"mb-6 text-sm hidden text-secondary",children:[" ","Create skills, agents and workflows for building multiagent capabilities"," "]}),(0,t.jsxs)("div",{className:"mb-4 text-primary",children:[" ",(0,t.jsx)(b.A,{tabBarStyle:{paddingLeft:0,marginLeft:0},defaultActiveKey:"4",tabPosition:"left",items:[{label:(0,t.jsxs)("div",{className:"w-full  ",children:[" ",(0,t.jsx)(w.A,{className:"h-4 w-4 inline-block mr-1"}),"Skills"]}),key:"1",children:(0,t.jsx)(y,{})},{label:(0,t.jsxs)("div",{className:"w-full  ",children:[" ",(0,t.jsx)(C.A,{className:"h-4 w-4 inline-block mr-1"}),"Models"]}),key:"2",children:(0,t.jsx)(en,{})},{label:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.A,{className:"h-4 w-4 inline-block mr-1"}),"Agents"]}),key:"3",children:(0,t.jsx)(Z,{})},{label:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(es.A,{className:"h-4 w-4 inline-block mr-1"}),"Workflows"]}),key:"4",children:(0,t.jsx)($,{})}]})]}),(0,t.jsx)("div",{})]});function eo(){return(0,t.jsx)("main",{style:{height:"100%"},className:"h-full",children:(0,t.jsx)(ei,{})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[738,559,496,355,971,441,517,358],()=>s(57148)),_N_E=e.O()}]);